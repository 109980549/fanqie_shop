layui.form.verify({username:function(value,item){if(!new RegExp("^[a-zA-Z0-9_\u4e00-\u9fa5\\s·]+$").test(value)){return"用户名不能有特殊字符"}if(/(^\_)|(\__)|(\_+$)/.test(value)){return"用户名首尾不能出现下划线'_'"}if(/^\d+\d+\d$/.test(value)){return"用户名不能全为数字"}},mingzi:function(v){reg=/^[\u4E00-\u9FA5]{2,4}$/;if(!reg.test(v)){return"请输入正确的姓名"}},thumb:function(value,item){if(!value){$(item).prev().prev().prev().prev().css({"color":"#FF5722","border":"1px solid"});return"请上传文件"}},pass:[/^[\S]{6,12}$/,"密码必须6到12位，且不能出现空格"],repass:function(value){var p=$("#pwd").val();if(p!=value){return"两次输入的密码不一样"}}});layui.form.on("submit(sub)",function(data){new f_ajax(data);return false});layui.form.on("submit(table-find)",function(){layui.table.reload("common",{where:{name:$("#table-find-val").val(),find:"find",total:""},done:function(res,curr,count){this.where.total=count;this.where.find="";layer.photos({photos:".img_view"})}});return false});layui.form.on("submit(dels)",function(data){var $checkbox=$('tbody input[type="checkbox"][ckd="ckd"]');if($checkbox.is(":checked")){new f_ajax(data)}else{layer.msg("请选择您要删除的数据")}return false});function dels_row(data){if(data.state==1){var d=data.data;for(var i=0;i<d.length;i++){$("#list_"+d[i]).remove()}layer.msg(data.message,{icon:data.state})}else{layer.msg(data.message,{icon:data.state})}}$(".f_del").click(function(e){e.preventDefault();var url=$(this).data("href");var self=this;layer.confirm("确定要执行当前操作？",{btn:["是","否"]},function(index){layer.close(index);var l=loads();$.get(url,function(data){if(data.state==1){$(self).parents("tr").remove()}layer.msg(data.message,{icon:data.state});layer.close(l)},"json")});return false});layui.form.on("switch(open)",function(data){var url=data.elem.dataset.url;var l=loads();var open=data.elem.checked?1:0;$.get(url,{open:open},function(data){if(data.state==1){layer.msg(data.message,{icon:data.state})}else{layer.msg(data.message,{icon:data.state})}layer.close(l)},"json");return false});layui.form.on("checkbox(allChoose)",function(data){var child=$(data.elem).parents("table").find('tbody input[type="checkbox"][ckd="ckd"]:not([name="show"])');child.each(function(index,item){item.checked=data.elem.checked});layui.form.render("checkbox")});$(".empty-table-td").each(function(){var th=$(this).parent().parent().prev().children(":first").children();$(this).attr("colspan",th.length);$(this).css("text-align","center")});layui.table.on("tool(common)",function(obj){var data=obj.data;if(obj.event=="del"){var url=$(event.target).data("href");layer.confirm("确定要执行当前操作？",{btn:["是","否"]},function(index){layer.close(index);var l=loads();$.get(url,function(data){if(data.state==1){obj.del()}layer.msg(data.message,{icon:data.state});layer.close(l)},"json")})}});var tabArr=new Object();layui.table.on("checkbox(common)",function(obj){if(obj.type=="all"){return}if(obj.checked){tabArr[obj.data.id]=obj.data.LAY_TABLE_INDEX}else{delete tabArr[obj.data.id]}});$(".f_dels").click(function(){var url=$(this).attr("url");var checkStatus=layui.table.checkStatus("common"),data=checkStatus.data,tmpArr=new Object(),ids=new Object();for(var i=0;i<data.length;i++){if(!tabArr){ids[i]=data[i].id}else{tmpArr[data[i].id]=tabArr[data[i].id];ids[i]=data[i].id}}if(data.length){layer.confirm("确定要执行当前操作？",{btn:["是","否"]},function(index){layer.close(index);var l=loads();$.post(url,{checked:ids},function(d){if(d.state==1){if(checkStatus.isAll){$("tr").remove()}else{$.each(tmpArr,function(k){$("tr[data-index="+tmpArr[k]+"]").remove()})}}layer.msg(d.message,{icon:d.state});layer.close(l)},"json")})}else{layer.msg("请选择您要删除的数据")}});document.oncontextmenu=function(){return false};function loads(){return layer.load(1,{shade:[0.5,"#000"]})}$(document).on("click",".fq_iframe",function(){var wh=$(this).data("wh");var url=$(this).data("url");var title=$(this).data("title");var classs=$(this).data("class");var shop=$(this).data("shop");if(typeof(classs)=="undefined"){classs=""}else{classs="/classs-"+classs+shop}wh=typeof(wh)=="undefined"?["1000px","600px"]:wh.split(",");layer.open({type:2,title:title,shade:0.6,maxmin:true,area:wh,content:url+classs,zIndex:layer.zIndex,success:function(layero,index){}})});