(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-pointsmall-pay"],{"02c8":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var e={data:function(){return{address:"",message:"",payway:1,is_pay:!1,total:0,goods:"",marks:"",code:0,is_region:!1,region:""}},onLoad:function(){this.goods=uni.getStorageSync("pointsmall_goods"),this.total=this.goods.integral*this.goods.num+" 积分"},onShow:function(){this.address&&this.onRegion()},methods:{onRegion:function(){var t=this;this.fq_get("fanqie/pointsmall/get_delivery",{gid:this.goods.id,aid:this.address.id,num:this.goods.num},(function(i){t.region=i.data,t.total=t.total+" + "+i.data.delivery_fee+"元",t.is_region=!0}))},onPay:function(){var i=this,e={};return t("log",this.goods," at pages/pointsmall/pay.vue:124"),this.address.id?this.goods.num?(e.aid=this.address.id,e.gid=this.goods.id,e.num=this.goods.num,void this.fq_post("fanqie/pointsmall/pay",e,(function(t){i.region.delivery_fee?s(t.data,i):i.showMs(t.message,(function(){uni.navigateTo({url:"/pages/pointsmall/myorder?nav=0"})}))}))):(this.Toast("数量错误","none"),!1):(this.Toast("请选择收货地址","none"),!1)},onPayway:function(t){this.payway=t.detail.value},onAddress:function(){uni.navigateTo({url:"/pages/goods/address?order=1"})}}};function a(t,i){WeixinJSBridge.invoke("getBrandWCPayRequest",t.config,(function(e){switch(e.err_msg){case"get_brand_wcpay_request:cancel":i.fq_del("fanqie/pointsmall/order",{id:t.order_id},(function(t){i.showMs("取消支付",(function(){uni.switchTab({url:"/pages/user/index"})}))}));break;case"get_brand_wcpay_request:fail":i.fq_del("fanqie/pointsmall/order",{id:t.order_id},(function(t){i.showMs("支付异常,截图联系客服"+t.err_code+t.err_desc+t.err_msg,(function(){uni.switchTab({url:"/pages/user/index"})}))}));break;case"get_brand_wcpay_request:ok":i.showMs("支付成功",(function(){uni.navigateTo({url:"/pages/pointsmall/myorder?nav=0"})}));break}}))}function s(t,i){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",a,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",a),document.attachEvent("onWeixinJSBridgeReady",a)):a(t,i)}i.default=e}).call(this,e("0de9")["log"])},1549:function(t,i,e){"use strict";e.r(i);var a=e("2342"),s=e("ebc7");for(var n in s)"default"!==n&&function(t){e.d(i,t,(function(){return s[t]}))}(n);e("57cf");var o,r=e("f0c5"),c=Object(r["a"])(s["default"],a["b"],a["c"],!1,null,"d775c82a",null,!1,a["a"],o);i["default"]=c.exports},2342:function(t,i,e){"use strict";var a,s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("custom",{attrs:{bgColor:"bg-white",isBack:!0}},[e("template",{attrs:{slot:"right"},slot:"right"},[e("v-uni-navigator",{staticClass:"action",attrs:{url:"/pages/index/index","open-type":"switchTab","hover-class":"none"}},[e("v-uni-view",{staticClass:"cuIcon-home"})],1)],1),e("template",{attrs:{slot:"content"},slot:"content"},[t._v("安全支付")])],2),e("v-uni-view",{staticClass:"cu-card dynamic"},[e("v-uni-view",{staticClass:"cu-item shadow"},[e("v-uni-view",{staticClass:"cu-list menu"},[e("v-uni-view",{staticClass:"cu-item arrow "},[e("v-uni-view",{staticClass:"content address ",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onAddress.apply(void 0,arguments)}}},[t.address?[e("v-uni-view",{staticClass:"text-bold margin-top-sm text-sm"},[t._v(t._s(t.address.username)+"，"+t._s(t.address.mobile))]),e("v-uni-view",{staticClass:"margin-bottom-sm text-sm text-cut",staticStyle:{width:"80%"}},[t._v(t._s(t.address.detail)+t._s(t.address.details))])]:[e("v-uni-text",{staticClass:"cuIcon-location"}),e("v-uni-text",[t._v("请选择配送地址")])]],2)],1)],1)],1)],1),e("v-uni-view",{staticClass:"cu-card dynamic"},[e("v-uni-view",{staticClass:"cu-item shadow "},[e("v-uni-view",{staticClass:"cu-list padding-lr padding-top"},[e("v-uni-view",{staticClass:"content "},[e("v-uni-view",{staticClass:"flex"},[e("v-uni-view",{staticClass:"flex-sub "},[e("v-uni-image",{staticClass:"png radius bg-gray",attrs:{src:t.goods.thumb,mode:"aspectFit"}})],1),e("v-uni-view",{staticClass:"flex-treble text-df "},[e("v-uni-view",{staticClass:"margin-bottom"},[t._v(t._s(t.goods.title))]),e("v-uni-view",{staticClass:"text-gray text-sm"},[e("v-uni-text",{staticClass:"text-red"},[t._v(t._s(t.goods.integral)+"积分")]),e("v-uni-text",{staticClass:"text-gray margin-left"},[t._v("x "+t._s(t.goods.num))])],1)],1)],1)],1)],1),e("v-uni-view",{staticClass:"solid-top margin-top-sm"},[e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-input",{attrs:{placeholder:"请输入您要备注的信息"},model:{value:t.marks,callback:function(i){t.marks=i},expression:"marks"}})],1)],1)],1)],1),t.is_region?e("v-uni-view",{staticClass:"cu-card dynamic"},[e("v-uni-view",{staticClass:"cu-item shadow "},[e("v-uni-view",{staticClass:"cu-list menu sm-border"},[e("v-uni-view",{staticClass:"cu-item arrow"},[e("v-uni-view",{staticClass:"content"},[e("v-uni-text",{staticClass:"text-grey"},[t._v("快递费用")])],1),e("v-uni-view",{staticClass:"action"},[e("v-uni-text",{staticClass:"text-red text-sm"},[t._v(t._s(t.region.delivery_fee?t.region.delivery_fee:"包邮"))])],1)],1),t.region.day?e("v-uni-view",{staticClass:"cu-item arrow"},[e("v-uni-view",{staticClass:"content"},[e("v-uni-text",{staticClass:"text-grey"},[t._v("快递时效")])],1),e("v-uni-view",{staticClass:"action"},[e("v-uni-text",{staticClass:"text-red text-sm"},[t._v(t._s(t.region.day))])],1)],1):t._e()],1)],1)],1):t._e(),e("v-uni-view",{staticClass:"cu-tabbar-height"}),e("v-uni-view",{staticClass:"cu-tabbar-height"}),e("v-uni-view",{staticClass:"cu-bar bg-white tabbar border foot"},[e("v-uni-view",{staticClass:"padding-lr flex-treble"},[t._v("应付积分："),e("v-uni-text",{staticClass:"text-red text-bold"},[t._v(t._s(t.total))])],1),e("v-uni-view",{staticClass:"bg-gradual-green submit",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onPay.apply(void 0,arguments)}}},[t._v("立即支付")])],1)],1)},n=[];e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){return a}))},"57cf":function(t,i,e){"use strict";var a=e("e70a"),s=e.n(a);s.a},"6d70":function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,'.png[data-v-d775c82a]{width:%?120?%;height:%?120?%}.cu-card>.cu-item[data-v-d775c82a]{margin-bottom:0}.address[data-v-d775c82a]::before{content:"";left:0;right:0;bottom:0;height:2px;position:absolute;background:-webkit-repeating-linear-gradient(135deg,#ff6c6c,#ff6c6c 20%,transparent 0,transparent 25%,#1989fa 0,#1989fa 45%,transparent 0,transparent 50%);background:repeating-linear-gradient(-45deg,#ff6c6c,#ff6c6c 20%,transparent 0,transparent 25%,#1989fa 0,#1989fa 45%,transparent 0,transparent 50%);background-size:80px}',""]),t.exports=i},e70a:function(t,i,e){var a=e("6d70");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=e("4f06").default;s("408041c3",a,!0,{sourceMap:!1,shadowMode:!1})},ebc7:function(t,i,e){"use strict";e.r(i);var a=e("02c8"),s=e.n(a);for(var n in a)"default"!==n&&function(t){e.d(i,t,(function(){return a[t]}))}(n);i["default"]=s.a}}]);