(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shop-set"],{"186b":function(t,e,i){var n=i("9b93");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("137efeb6",n,!0,{sourceMap:!1,shadowMode:!1})},4830:function(t,e,i){"use strict";i.r(e);var n=i("be35"),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},"7c7e":function(t,e,i){"use strict";var n=i("186b"),a=i.n(n);a.a},"8bb2":function(t,e,i){"use strict";i.r(e);var n=i("f55a"),a=i("a9ba");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);i("7c7e");var o,r=i("f0c5"),u=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"1d6c9665",null,!1,n["a"],o);e["default"]=u.exports},"9b93":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,"._cpimg[data-v-1d6c9665]{position:fixed;top:%?-99999?%;left:%?-99999?%;z-index:-99999}",""]),t.exports=e},a9ba:function(t,e,i){"use strict";i.r(e);var n=i("dccb"),a=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=a.a},b420:function(t,e,i){var n=i("23e7"),a=i("621a"),s=i("a981");n({global:!0,forced:!s},{DataView:a.DataView})},b8ab:function(t,e,i){"use strict";i.r(e);var n=i("cc39"),a=i("4830");for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);var o,r=i("f0c5"),u=Object(r["a"])(a["default"],n["b"],n["c"],!1,null,"654f90ca",null,!1,n["a"],o);e["default"]=u.exports},be35:function(t,i,n){"use strict";n("a434"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=n("7870"),s={data:function(){return{index:-1,field:{title:"",info:"",mobile:"",username:""},logo:[],thumb:[]}},onLoad:function(t){this.getItem()},methods:{getItem:function(){var t=this;this.fq_get("fanqie/shop/info","",(function(e){t.field=e.data,""==t.field.logo||t.logo.push(t.field.logo),""==t.field.thumb||t.thumb.push(t.field.thumb)}))},upload:function(t,e){var i=this;a.fq_upload(this.host+"fanqie/api/issue_upimg",t,"pics",(function(t){1==e?i.field.logo=t.data:i.field.thumb=t.data}))},ChooseImage:function(t){this.index=t,this.$refs.cpimg._changImg()},cpimgOk:function(t){1==this.index?(this.logo=t,this.upload(this.logo[0],1)):(this.thumb=t,this.upload(this.thumb[0],2))},ViewImage:function(t){if(1==t)this.logo;else this.thumb;uni.previewImage({urls:urls,current:e.currentTarget.dataset.url})},DelImg:function(t,e){1==e?this.logo.splice(t.currentTarget.dataset.index,1):this.thumb.splice(t.currentTarget.dataset.index,1)},onSub:function(){var t=this;if(this.check()){if(!this.logo[0]||!this.thumb[0])return this.Toast("LOGO和营业执照必须上传","none"),!1;this.fq_edit("fanqie/shop/info",this.field,(function(e){t.showMs(e.message,(function(){uni.navigateBack()}))}))}},check:function(){var t=!0;return this.field.title?this.field.info?this.field.mobile?this.field.username||(this.Toast("联系人不能为空","none"),t=!1):(this.Toast("联系电话不能为空","none"),t=!1):(this.Toast("简介不能为空","none"),t=!1):(this.Toast("名称不能为空","none"),t=!1),t},locationChange:function(t){var e=t.detail.value;this.index=e,this.field.location_id=this.picker[e].id},onLocation:function(t){var e=this;this.field.longitude?-1==this.index&&this.fq_get("fanqie/location/shop_apply",{longitude:this.field.longitude,latitude:this.field.latitude},(function(t){e.picker=t.data,e.index=0})):this.Toast("请选择地址","none")}}};i.default=s},cc39:function(t,e,i){"use strict";var n={cpimg:i("8bb2").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("custom",{attrs:{bgColor:"bg-white",isBack:!0}},[i("template",{attrs:{slot:"content"},slot:"content"},[t._v("店铺资料")])],2),i("v-uni-form",[i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("大概简介")]),i("v-uni-input",{attrs:{placeholder:"比如主营xxxxx"},model:{value:t.field.info,callback:function(e){t.$set(t.field,"info",e)},expression:"field.info"}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("联系电话")]),i("v-uni-input",{attrs:{placeholder:"填写手机号即可"},model:{value:t.field.mobile,callback:function(e){t.$set(t.field,"mobile",e)},expression:"field.mobile"}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("联  系  人")]),i("v-uni-input",{attrs:{placeholder:"请填写联系人姓名"},model:{value:t.field.username,callback:function(e){t.$set(t.field,"username",e)},expression:"field.username"}})],1),i("v-uni-view",{staticClass:"cu-bar bg-white margin-top"},[i("v-uni-view",{staticClass:"action"},[t._v("LOGO上传")]),i("v-uni-view",{staticClass:"action"},[t._v(t._s(t.logo.length)+"/1")])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"grid col-4 grid-square flex-sub"},[t._l(t.logo,(function(e,n){return i("v-uni-view",{key:n,staticClass:"bg-img",attrs:{"data-url":t.logo[n]},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ViewImage(1)}}},[i("v-uni-image",{attrs:{src:t.logo[n],mode:"aspectFill"}}),i("v-uni-view",{staticClass:"cu-tag bg-red",attrs:{"data-index":n},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.DelImg(e,1)}}},[i("v-uni-text",{staticClass:"cuIcon-close"})],1)],1)})),t.logo.length<1?i("v-uni-view",{staticClass:"solids",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChooseImage(1)}}},[i("v-uni-text",{staticClass:"cuIcon-cameraadd"})],1):t._e()],2)],1),i("v-uni-view",{staticClass:"cu-bar bg-white margin-top"},[i("v-uni-view",{staticClass:"action"},[t._v("营业执照上传")]),i("v-uni-view",{staticClass:"action"},[t._v(t._s(t.thumb.length)+"/1")])],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"grid col-4 grid-square flex-sub"},[t._l(t.thumb,(function(e,n){return i("v-uni-view",{key:n,staticClass:"bg-img",attrs:{"data-url":t.thumb[n]},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ViewImage(2)}}},[i("v-uni-image",{attrs:{src:t.thumb[n],mode:"aspectFill"}}),i("v-uni-view",{staticClass:"cu-tag bg-red",attrs:{"data-index":n},on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.DelImg(e,2)}}},[i("v-uni-text",{staticClass:"cuIcon-close"})],1)],1)})),t.thumb.length<1?i("v-uni-view",{staticClass:"solids",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.ChooseImage(2)}}},[i("v-uni-text",{staticClass:"cuIcon-cameraadd"})],1):t._e()],2)],1)],1),i("cpimg",{ref:"cpimg",attrs:{number:2,fixOrientation:!0,size:500,maxWidth:1e3,ql:.9,type:"url"},on:{result:function(e){arguments[0]=e=t.$handleEvent(e),t.cpimgOk.apply(void 0,arguments)},err:function(e){arguments[0]=e=t.$handleEvent(e),t.cpimgErr.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"cu-bar foot bg-orange tabbar"},[i("v-uni-view",{staticClass:"submit",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onSub()}}},[t._v("确认修改")])],1)],1)},s=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}))},dccb:function(t,e,i){"use strict";i("99af"),i("c975"),i("ace4"),i("b420"),i("a9e3"),i("d3b7"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=[],a="",s=0,o={name:"cpimg",props:{maxWidth:{type:Number,default:750},type:{type:String,default:"url"},ql:{type:Number,default:.92},src:{type:String,default:""},number:{type:Number,default:1},fixOrientation:{type:Boolean,default:!0},size:{type:Number,default:5e5}},data:function(){return{cWidth:750,cHeight:750}},onUnload:function(){},methods:{_changImg:function(){var t=this;""==t.src?uni.chooseImage({count:t.number,sizeType:["compressed"],success:function(e){n=[],a=e.tempFilePaths,s=0,t._cpImg()},fail:function(e){t._err(e)}}):_cpImg(t.src)},_cpImg:function(){var t=this,e=a[s];function i(i,n){if(i.type.indexOf("png")>=0)return t._result(e),!1;var a,s,o=i.width,r=i.height,u=1,c=1;(n/1024>=t.size||i.width>=t.maxWidth)&&(i.width>=i.height&&i.width>=t.maxWidth?(i.height=t.maxWidth*i.height/i.width,i.width=t.maxWidth):i.width<i.height&&i.height>=t.maxWidth&&(i.width=t.maxWidth*i.width/i.height,i.height=t.maxWidth),u=i.width/o,c=i.height/r),a=o*u,s=r*c;var l=uni.createCanvasContext("_myCanvas",t);if(t.cWidth=i.width,t.cHeight=i.height,t.fixOrientation){var d=i.orientation;[5,6,7,8,"right","left","right-mirrored","left-mirrored"].indexOf(d)>-1&&(t.cWidth=i.height,t.cHeight=i.width),2==d||"up-mirrored"==d?(l.translate(a,0),l.scale(-1,1)):3==d||"down"==d?(l.translate(a,s),l.rotate(Math.PI)):4==d||"down-mirrored"==d?(l.translate(0,s),l.scale(1,-1)):5==d||"right-mirrored"==d?(l.rotate(.5*Math.PI),l.scale(1,-1)):6==d||"right"==d?(l.rotate(.5*Math.PI),l.translate(0,-s)):7==d||"left-mirrored"==d?(l.rotate(.5*Math.PI),l.translate(a,-s),l.scale(-1,1)):8==d||"left"==d?(l.rotate(-.5*Math.PI),l.translate(-a,0)):l.translate(0,0)}var h=0;function f(){var e=t.maxWidth/5;return e>=600?600:e<=100?100:e}h=f(),setTimeout((function(){l.drawImage(e,0,0,a,s),l.draw(!1,(function(){var e=0;e=10,setTimeout((function(){uni.canvasToTempFilePath({width:Number(t.cWidth),height:Number(t.cHeight),destWidth:Number(t.cWidth),destHeight:Number(t.cHeight),canvasId:"_myCanvas",fileType:"jpg",quality:Number(t.ql),success:function(e){if("base64"==t.type){t._result(e.tempFilePath)}else t._result(e.tempFilePath)},fail:function(e){t._err(e)}},t)}),e)}))}),h)}uni.showLoading({title:"图片压缩中 ".concat(s+1,"/").concat(a.length),mask:!0}),t._getH5ImageInfo(e,(function(t){i(t,t.size)}))},_reverseImgData:function(t){for(var e=t.width,i=t.height,n=0,a=0;a<i/2;a++)for(var s=0;s<4*e;s++)n=t.data[a*e*4+s],t.data[a*e*4+s]=t.data[(i-a-1)*e*4+s],t.data[(i-a-1)*e*4+s]=n;return t},_getH5ImageInfo:function(t,e){var i=new Image;i.src=t,i.onload=function(i){var n=this,a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="blob",a.onload=function(t){var i=this;if(200==i.status||0===i.status){var a=new FileReader;a.onload=function(t){var a=new DataView(this.result);if(65496!=a.getUint16(0,!1))return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:-1});var s=a.byteLength,o=2;while(o<s){var r=a.getUint16(o,!1);if(o+=2,65505==r){if(1165519206!=a.getUint32(o+=2,!1))return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:-1});var u=18761==a.getUint16(o+=6,!1);o+=a.getUint32(o+4,u);var c=a.getUint16(o,u);o+=2;for(var l=0;l<c;l++)if(274==a.getUint16(o+12*l,u))return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:a.getUint16(o+12*l+8,u)})}else{if(65280!=(65280&r))break;o+=a.getUint16(o,!1)}}return e({size:i.response.size,type:i.response.type,width:n.width,height:n.height,orientation:-1})},a.readAsArrayBuffer(i.response)}},a.send()}},_result:function(t,e){n.push(t),s+=1,a.length-1>=s?this._cpImg():(uni.hideLoading(),this.$emit("result",n))},_err:function(t){uni.hideLoading(),this.$emit("err",t)}}};e.default=o},f55a:function(t,e,i){"use strict";var n,a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"_cpimg"},[i("v-uni-canvas",{style:{width:t.cWidth+"px",height:t.cHeight+"px"},attrs:{id:"_myCanvas","canvas-id":"_myCanvas"}})],1)},s=[];i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}))}}]);