(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-goods-detail"],{"0693":function(t,i,e){"use strict";var a,s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",[e("custom",{attrs:{transparent:!0,top:t.scrollTop,isBack:!0}},[e("template",{attrs:{slot:"right"},slot:"right"},[e("v-uni-navigator",{staticClass:"action roundIcon",attrs:{url:"/pages/index/index","open-type":"switchTab","hover-class":"none"}},[e("v-uni-view",{staticClass:"cuIcon-home"})],1)],1)],2),0!=Object.keys(t.goods).length?[e("v-uni-swiper",{style:"height:"+t.swpimgheight+"px",attrs:{"indicator-dots":!1,circular:!0,autoplay:!0,interval:5e3,duration:"500"},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.swiperChange.apply(void 0,arguments)}}},t._l(t.goods.thumb_arr,(function(i,a){return e("v-uni-swiper-item",{key:a},[e("v-uni-image",{staticStyle:{width:"100%"},attrs:{src:i,mode:"widthFix"},on:{load:function(i){arguments[0]=i=t.$handleEvent(i),t.imageD.apply(void 0,arguments)}}})],1)})),1),e("v-uni-view",{staticClass:"swiper-tag"},[e("v-uni-view",{staticClass:"cu-tag radius bg-white"},[t._v(t._s(t.swiperCur+1)+"/"+t._s(t.goods.thumb_arr.length))]),t.goods.video?e("v-uni-view",{staticClass:"cu-tag round vide-tag",attrs:{"data-target":"videoShow"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.showModal.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"cuIcon-videofill margin-right-xs"}),e("v-uni-text",{staticClass:"text-xs"},[t._v("播放视频")])],1):t._e()],1),"videoShow"==t.modalName?e("v-uni-view",{staticClass:"cu-modal swiper-video",class:"videoShow"==t.modalName?"show":""},[e("v-uni-view",{staticClass:"cu-dialog",style:[{top:t.CustomBar+5+"px"}]},[e("v-uni-video",{attrs:{"webkit-playsinline":!0,src:t.goods.video,controls:"controls",preload:!0}})],1),e("v-uni-button",{staticClass:"cu-btn line-white round ModalClose",style:[{top:t.ModalClose+"px"}],on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.hideModal.apply(void 0,arguments)}}},[t._v("关闭")])],1):t._e(),e("v-uni-view",{staticClass:"flex goodsHead"},[e("v-uni-view",{staticClass:"bg-red padding-sm flex-sub"},[e("v-uni-view",{staticClass:"price"},[e("v-uni-text",{staticClass:"text-price"},[t._v(t._s(t.goods.price))]),e("v-uni-text",{staticClass:"text-price text-del"},[t._v(t._s(t.goods.ot_price))])],1),e("v-uni-view",{staticClass:"text-sm"},[t._v("累计出售"+t._s(t.goods.fsales)+"件/仅剩"+t._s(t.goods.stock)+"件")])],1),t.goods.fx.yj_say?e("v-uni-view",{staticClass:"bg-yellow padding-lr flex flex-direction justify-center align-center"},[e("v-uni-view",{staticClass:"text-brown text-center padding-bottom-xs"},[t._v("购买反")]),e("v-uni-view",{staticClass:"text-bold text-red"},[t._v(t._s(t.goods.fx.yj_say))])],1):t._e()],1),e("v-uni-view",{staticClass:"bg-white padding"},[e("v-uni-view",{staticClass:"text-xl text-black text-bold text-line2cut"},[t._v(t._s(t.goods.title))]),e("v-uni-view",{staticClass:"text-grey margin-top-sm"},[t._v(t._s(t.goods.info))])],1),e("v-uni-view",{staticClass:"bg-red light padding-sm",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onShare.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"cu-capsule radius"},[e("v-uni-view",{staticClass:"cu-tag bg-brown sm"},[e("v-uni-text",{staticClass:"cuIcon-moneybag"})],1),e("v-uni-view",{staticClass:"cu-tag line-brown sm"},[t._v(t._s(t.goods.fx.fx_say))])],1),e("v-uni-text",{staticClass:"cuIcon-share text-right fr"},[t._v("立即分享")])],1),"1"==t.shop_is_openid?[e("v-uni-view",{staticClass:"cu-bar bg-white margin-top"},[e("v-uni-view",{staticClass:"action"},[e("v-uni-text",{staticClass:"cuIcon-shop text-orange"}),e("v-uni-text",[t._v(t._s(t.goods.shop.title))])],1),e("v-uni-navigator",{staticClass:"action text-df text-gray",attrs:{url:"/pages/shop/index?gid="+t.goods.shop.id,"hover-class":"none"}},[t._v("进入"),e("v-uni-text",{staticClass:"cuIcon-right"})],1)],1),e("v-uni-view",{staticClass:"flex bg-white solid-top  padding-sm"},[e("v-uni-view",{staticClass:"flex-sub text-center"},[e("v-uni-image",{staticClass:"round",staticStyle:{width:"110upx",height:"110upx"},attrs:{src:t.goods.shop.logo}})],1),e("v-uni-view",{staticClass:"flex-treble"},[e("v-uni-view",[e("v-uni-text",{staticClass:"cuIcon-mark margin-right-xs"}),t._v(t._s(t.goods.shop.info))],1),e("v-uni-view",{staticClass:"margin-top text-gray",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.map()}}},[e("v-uni-text",{staticClass:"cuIcon-location margin-right-xs"}),t._v(t._s(t.goods.shop.address))],1)],1)],1)]:t._e(),e("sku",{attrs:{goods:t.goods,goods_type:1,modalSku:t.modalSku},on:{get_cart_num:function(i){arguments[0]=i=t.$handleEvent(i),t.addCartNum.apply(void 0,arguments)},hideSku:function(i){arguments[0]=i=t.$handleEvent(i),t.hideSku.apply(void 0,arguments)}}}),t.goods.comment?e("v-uni-view",{staticClass:"cu-bar bg-white margin-top"},[e("v-uni-view",{staticClass:"action"},[e("v-uni-text",{staticClass:"cuIcon-titles text-orange"}),e("v-uni-text",[t._v("用户评论")])],1),e("v-uni-navigator",{staticClass:"action text-df text-gray",attrs:{url:"/pages/goods/comment?gid="+t.goods.id,"hover-class":"none"}},[t._v("更多"),e("v-uni-text",{staticClass:"cuIcon-right"})],1)],1):t._e(),e("v-uni-view",{staticClass:"cu-card dynamic no-card"},t._l(t.goods.comment,(function(i,a){return e("v-uni-view",{key:a,staticClass:"cu-item solid-top"},[e("v-uni-view",{staticClass:"cu-list menu-avatar"},[e("v-uni-view",{staticClass:"cu-item"},[e("v-uni-view",{staticClass:"cu-avatar round lg",style:"background-image:url("+i.avatar+");"}),e("v-uni-view",{staticClass:"content flex-sub"},[e("v-uni-view",[e("v-uni-view",{staticClass:"text-cut",staticStyle:{width:"200upx"}},[t._v(t._s(i.nickname))]),e("v-uni-view",{staticClass:"margin-left-xs"},t._l(5,(function(t,a){return e("v-uni-text",{key:a,class:a<parseInt(i.score)?"cuIcon-favorfill text-orange":"cuIcon-favor text-gray"})})),1)],1),e("v-uni-view",{staticClass:"text-grey"},[t._v(t._s(i.add_time))])],1)],1)],1),e("v-uni-view",{staticClass:"text-content margin-top-sm"},[t._v(t._s(i.comment))])],1)})),1),e("v-uni-view",{staticClass:"goods-content bg-white margin-top-sm padding"},[e("v-uni-rich-text",{staticClass:"rich-text",attrs:{nodes:t.goods.content}})],1)]:t._e(),e("v-uni-view",{staticClass:"cu-tabbar-height"}),e("v-uni-view",{staticClass:"cu-tabbar-height"}),e("v-uni-view",{staticClass:"cu-bar bg-white tabbar border shop foot"},[e("v-uni-button",{staticClass:"action",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.call()}}},[e("v-uni-view",{staticClass:"cuIcon-service text-green"}),t._v("客服")],1),e("v-uni-view",{staticClass:"action ",class:t.is_relation?"text-orange":"",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onRelation.apply(void 0,arguments)}}},[e("v-uni-view",{class:t.is_relation?"cuIcon-favorfill":"cuIcon-favor"}),t._v(t._s(t.is_relation?"已收藏":"收藏"))],1),e("v-uni-view",{staticClass:"action",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onCart.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"cuIcon-cart"},[e("v-uni-view",{staticClass:"cu-tag badge"},[t._v(t._s(t.cart_num))])],1),t._v("购物车")],1),e("v-uni-view",{staticClass:"btn-group"},[e("v-uni-button",{staticClass:"cu-btn bg-orange round ",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.showSku.apply(void 0,arguments)}}},[t._v("加入购物车")]),e("v-uni-button",{staticClass:"cu-btn bg-red round ",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.showSku.apply(void 0,arguments)}}},[t._v("立即购买")])],1)],1),e("v-uni-view",{staticClass:"cu-modal text-left bottom-modal",class:"shareModal"==t.modalName?"show":""},[e("v-uni-view",{staticClass:"cu-dialog"},[e("v-uni-view",{staticClass:"bg-white"},[e("v-uni-view",{staticClass:"sku-close",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.hideModals.apply(void 0,arguments)}}},[e("v-uni-text",{staticClass:"cuIcon-roundclose"})],1),e("v-uni-view",{staticClass:"flex padding-tb-xl justify-around"},[e("v-uni-button",{staticClass:"btn shadow bg-gradual-purple",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.share_py.apply(void 0,arguments)}}},[t._v("分享朋友")]),e("v-uni-button",{staticClass:"btn shadow bg-gradual-pink",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.onHb.apply(void 0,arguments)}}},[t._v("分享海报")])],1)],1)],1)],1),e("v-uni-view",{staticClass:"content"},[e("v-uni-view",{staticClass:"flex_row_c_c modalView",class:t.qrShow?"show":""},[e("v-uni-view",{staticClass:"flex_column"},[e("v-uni-view",{staticClass:"backgroundColor-white padding1vh"},[e("v-uni-image",{staticClass:"posterImage",attrs:{src:t.poster.finalPath||"",mode:"widthFix"}})],1),e("v-uni-view",{staticClass:"flex_row marginTop2vh justify-center"},[e("v-uni-button",{staticClass:"cu-btn round bg-orange",on:{click:function(i){i.preventDefault(),i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.saveImage()}}},[t._v("保存图片")]),e("v-uni-button",{staticClass:"cu-btn round margin-left",on:{click:function(i){i.preventDefault(),i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.close()}}},[t._v("关闭图片")])],1)],1)],1),e("v-uni-view",{staticClass:"hideCanvasView"},[e("v-uni-canvas",{staticClass:"hideCanvas",style:{width:(t.poster.width||10)+"px",height:(t.poster.height||10)+"px"},attrs:{"canvas-id":"default_PosterCanvasId"}})],1)],1)],2)},o=[];e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return a}))},"1d62":function(t,i,e){"use strict";var a=e("df9b"),s=e.n(a);s.a},"91d7":function(t,i,e){"use strict";(function(t){var a=e("ee27");e("99af"),e("d81d"),e("d3b7"),e("acd8"),e("e25e"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,e("96cf");var s=a(e("c964")),o=a(e("abdc")),n=e("c519"),c={data:function(){return{goods:{},StatusBar:this.StatusBar,CustomBar:this.CustomBar,scrollTop:0,ModalClose:this.CustomBar+35+uni.upx2px(690),modalSku:!1,modalName:null,swiperCur:0,dataInfo:"",cart_num:0,is_relation:!1,TypeModal:"type",id:0,canvasId:"default_PosterCanvasId",user:uni.getStorageSync("userinfo"),poster:{},qrShow:!1,screenWidth:0,swpimgheight:187,shop_is_openid:""}},onLoad:function(t){t.uid&&t.uid>0&&uni.setStorageSync("fx_id",t.uid),this.shop_is_openid=uni.getStorageSync("shop_is_open"),this.id=t.id,this.getGoodsDetail();var i=this;uni.getSystemInfo({success:function(t){i.screenWidth=t.screenWidth}})},onPageScroll:function(t){this.scrollTop=t.scrollTop,t.scrollTop<0?this.topImgH=0-t.scrollTop+200:this.topImgH=200,t.scrollTop>200+uni.upx2px(354)-this.CustomBar?this.fixed=!0:this.fixed=!1},methods:{imageD:function(t){var i=t.detail;this.swpimgheight=parseInt(this.screenWidth/i.width*i.height)},shareFc:function(){var i=this;return(0,s.default)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,n.getSharePoster)({_this:i,bgScale:1,backgroundImage:i.goods.hb_img?i.goods.hb_img:"",background:i.goods.hb_img?"":{width:750,height:1334,backgroundColor:"#efd924"},posterCanvasId:i.canvasId,delayTimeScale:20,drawArray:function(t){var e=t.bgObj,a=(t.type,t.bgScale,.045*e.width),s=i.goods.hb.hb_field.map((function(t){return"text"==t.type&&(t.size=a),t})),o=[{type:"custom",setDraw:function(t){t.setFillStyle("#FFFFFF"),t.fillRect(30,30,690,808),t.setGlobalAlpha(1)}},{type:"custom",setDraw:function(t){t.setFillStyle("#FFFFFF"),t.fillRect(30,888,690,300),t.setGlobalAlpha(1)}}];return i.goods.hb_img||(s=o.concat(s)),new Promise((function(t,i){t(s)}))},setCanvasWH:function(t){var e=t.bgObj;t.type,t.bgScale;i.poster=e}});case 3:a=e.sent,t("log",a.poster.tempFilePath," at pages/goods/detail.vue:284"),i.poster.finalPath=a.poster.tempFilePath,i.qrShow=!0,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),o.default.hideLoading(),o.default.showToast(JSON.stringify(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},onShare:function(){this.modalName="shareModal"},share_py:function(){this.Toast("点击右上角分享","none"),this.hideModals()},onHb:function(){this.hideModals(),this.shareFc()},hideModals:function(){this.modalName=null},onRelation:function(){var t=this,i=this.is_relation,e=i?0:1,a=this;this.fq_post("fanqie/goods/my_collect",{un:e,gid:this.goods.id},(function(e){a.is_relation=!i,t.Toast(e.message)}))},addCartNum:function(t){this.cart_num=t},map:function(){uni.openLocation({latitude:parseFloat(this.goods.shop.latitude),longitude:parseFloat(this.goods.shop.longitude),name:this.goods.shop.title,address:this.goods.shop.address,success:function(i){t("log",i," at pages/goods/detail.vue:328")}})},call:function(){uni.makePhoneCall({phoneNumber:this.goods.shop.mobile})},onCart:function(){uni.switchTab({url:"/pages/cart/index"})},hideSku:function(){this.modalSku=!1},showSku:function(){this.modalSku=!0},showModal:function(t){this.modalName="videoShow"},hideModal:function(){this.modalName=null},swiperChange:function(t){this.swiperCur=t.detail.current},getGoodsDetail:function(){var t=this;this.fq_get("fanqie/goods/detail",{id:this.id},(function(i){t.goods=i.data,t.cart_num=i.data.cart_num,t.is_relation=i.data.is_relation,t.share()}))},CuntNumber:function(t){this.cuntNumber=t},showTypeModal:function(t){this.modalName="typeModal",this.TypeModal=t},saveImage:function(){this.Toast("长按图标，保存到相册","none")},close:function(){this.qrShow=!1},share:function(){var t=this,i=this.goods;this.$jwx.initJssdk((function(e){t.$jwx.share({share:{share_desc:i.info,share_thumb:i.thumb,share_title:i.title}},i.fx_url)}))},onShareAppMessage:function(){var t=uni.getStorageSync("userinfo");return{title:this.goods.title,imageUrl:this.goods.thumb,path:"/pages/goods/detail?id="+this.goods.id+"&fid="+t.id}}}};i.default=c}).call(this,e("0de9")["log"])},c5a9:function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,'.cu-bar.tabbar.shop .action[data-v-4ffe5ea3]{width:%?100?%}.zhekou[data-v-4ffe5ea3]{padding:0 2px}.sku-close[data-v-4ffe5ea3]{position:absolute;right:5px;font-size:25px}.btn[data-v-4ffe5ea3]{border-radius:50%;height:80px;width:80px;line-height:80px;font-size:12px}.cu-modal.swiper-video[data-v-4ffe5ea3]{background:rgba(0,0,0,.85)}.cu-modal.swiper-video .cu-dialog[data-v-4ffe5ea3]{width:%?690?%;height:%?690?%;position:fixed;padding:%?5?%;left:%?30?%;background:#000;border-radius:%?10?%}.cu-modal.swiper-video uni-video[data-v-4ffe5ea3]{width:%?680?%;height:%?680?%}.ModalClose[data-v-4ffe5ea3]{position:fixed;z-index:1026;color:#fff;left:0;right:0;width:%?160?%;margin:auto}.swiper-tag[data-v-4ffe5ea3]{position:relative;height:0}.swiper-tag .cu-tag.bg-white[data-v-4ffe5ea3]{position:absolute;z-index:100;bottom:15px;right:15px}.swiper-tag .cu-tag.vide-tag[data-v-4ffe5ea3]{position:absolute;z-index:100;bottom:15px;right:0;left:0;margin:auto;background-color:rgba(0,0,0,.6);width:%?150?%;line-height:26px;color:#fff}.goodsHead .price uni-text[data-v-4ffe5ea3]:first-child{font-size:%?52?%;font-weight:700;margin-right:%?10?%;display:inline-block}.goodsHead .time .cu-tag[data-v-4ffe5ea3]{font-size:12px;padding:0 %?10?%;border-radius:3px;margin:0 2px;height:%?36?%}.goodsHead .bg-red[data-v-4ffe5ea3]{position:relative}.goodsHead .bg-red[data-v-4ffe5ea3]::after{content:"\\e6ea";font-family:cuIcon;position:absolute;font-size:20px;-webkit-transform:rotate(180deg);transform:rotate(180deg);color:#f8c248;right:-11px;width:20px;height:20px;top:50%;margin-top:-10px}.cu-bar.foot[data-v-4ffe5ea3]{z-index:1000}.goods-content uni-image[data-v-4ffe5ea3]{max-width:100%;display:block;min-height:100px;background-color:#fff}.hideCanvasView[data-v-4ffe5ea3]{position:relative}.hideCanvas[data-v-4ffe5ea3]{position:fixed;top:%?-99999?%;left:%?-99999?%;z-index:-99999}.flex_row_c_c[data-v-4ffe5ea3]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center}.modalView[data-v-4ffe5ea3]{width:100%;height:100%;position:fixed;top:0;left:0;right:0;bottom:0;opacity:0;outline:0;-webkit-transform:scale(1.2);transform:scale(1.2);-webkit-perspective:%?2500?%;perspective:%?2500?%;background:rgba(0,0,0,.6);-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out;pointer-events:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;z-index:1002}.modalView.show[data-v-4ffe5ea3]{opacity:1;-webkit-transform:scale(1);transform:scale(1);pointer-events:auto}.flex_column[data-v-4ffe5ea3]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.backgroundColor-white[data-v-4ffe5ea3]{background-color:#fff}.border_radius_10px[data-v-4ffe5ea3]{border-radius:10px}.padding1vh[data-v-4ffe5ea3]{padding:1vh}.posterImage[data-v-4ffe5ea3]{width:60vw}.flex_row[data-v-4ffe5ea3]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.marginTop2vh[data-v-4ffe5ea3]{margin-top:2vh}',""]),t.exports=i},df9b:function(t,i,e){var a=e("c5a9");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=e("4f06").default;s("02fed444",a,!0,{sourceMap:!1,shadowMode:!1})},f7d3:function(t,i,e){"use strict";e.r(i);var a=e("91d7"),s=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);i["default"]=s.a},fc60:function(t,i,e){"use strict";e.r(i);var a=e("0693"),s=e("f7d3");for(var o in s)"default"!==o&&function(t){e.d(i,t,(function(){return s[t]}))}(o);e("1d62");var n,c=e("f0c5"),l=Object(c["a"])(s["default"],a["b"],a["c"],!1,null,"4ffe5ea3",null,!1,a["a"],n);i["default"]=l.exports}}]);